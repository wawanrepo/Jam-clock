
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Jam, Alarm & Timer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container" id="container">
    <h1>Jam Digital</h1>
    <div id="clock">00:00:00</div>
    <h2 id="calendar">Senin, 01 Januari 2025</h2>

    <!-- Alarm -->
    <div class="alarm-section">
      <label>Atur Alarm (jam:menit):</label><br>
      <input type="number" id="alarmHour" placeholder="Jam" min="0" max="23">
      <input type="number" id="alarmMinute" placeholder="Menit" min="0" max="59">
      <button onclick="setAlarm()">Set Alarm</button>
      <p id="alarmStatus">Alarm belum diatur</p>
    </div>

    <!-- Timer -->
    <div class="timer-section">
      <label>Timer (menit & detik):</label><br>
      <input type="number" id="timerMinute" placeholder="Menit" min="0">
      <input type="number" id="timerSecond" placeholder="Detik" min="0" max="59">
      <button onclick="startTimer()">Start Timer</button>
      <div id="timerDisplay" class="timer-display">Timer belum berjalan</div>
    </div>

    <!-- Custom Theme -->
    <div class="theme-section">
      <label>Ubah Warna Background:</label><br>
      <input type="color" id="colorPicker" onchange="changeThemeColor()">
    </div>
  </div>

  <script>
    let alarmTime = null;
    let timerInterval = null;
    let timerRemaining = 0;

    function updateDateTime() {
      const now = new Date();

      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const seconds = now.getSeconds().toString().padStart(2, '0');
      document.getElementById("clock").textContent = `${hours}:${minutes}:${seconds}`;

      const days = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
      const months = [
        "Januari", "Februari", "Maret", "April", "Mei", "Juni",
        "Juli", "Agustus", "September", "Oktober", "November", "Desember"
      ];
      const dayName = days[now.getDay()];
      const date = now.getDate().toString().padStart(2, '0');
      const month = months[now.getMonth()];
      const year = now.getFullYear();
      document.getElementById("calendar").textContent = `${dayName}, ${date} ${month} ${year}`;

      // Alarm visual
      if (alarmTime) {
        const [alarmHour, alarmMinute] = alarmTime.split(":").map(Number);
        const alarmDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), alarmHour, alarmMinute, 0);
        const diffMs = alarmDate.getTime() - now.getTime();

        if (diffMs <= 10000 && diffMs >= -10000) {
          document.getElementById("container").classList.add("alarm-active");
          if (diffMs > 0) {
            document.getElementById("alarmStatus").textContent = `⏰ Segera alarm (${Math.ceil(diffMs / 1000)} detik lagi)`;
          } else {
            document.getElementById("alarmStatus").textContent = "⏰ Alarm sedang aktif!";
          }
        } else {
          document.getElementById("container").classList.remove("alarm-active");
        }
      }
    }

    function setAlarm() {
      const hour = document.getElementById("alarmHour").value.padStart(2, '0');
      const minute = document.getElementById("alarmMinute").value.padStart(2, '0');
      alarmTime = `${hour}:${minute}`;
      document.getElementById("alarmStatus").textContent = `Alarm diatur ke ${alarmTime}`;
      document.getElementById("container").classList.remove("alarm-active");
    }

    function startTimer() {
      const min = parseInt(document.getElementById("timerMinute").value || 0);
      const sec = parseInt(document.getElementById("timerSecond").value || 0);
      timerRemaining = min * 60 + sec;

      if (timerInterval) clearInterval(timerInterval);

      timerInterval = setInterval(() => {
        if (timerRemaining > 0) {
          timerRemaining--;
          const m = Math.floor(timerRemaining / 60).toString().padStart(2, '0');
          const s = (timerRemaining % 60).toString().padStart(2, '0');
          document.getElementById("timerDisplay").textContent = `⏱️ ${m}:${s}`;
        } else {
          document.getElementById("timerDisplay").textContent = "⏱️ Timer selesai!";
          clearInterval(timerInterval);
        }
      }, 1000);
    }

    function changeThemeColor() {
      const color = document.getElementById("colorPicker").value;
      document.body.style.background = color;
    }

    setInterval(updateDateTime, 1000);
    updateDateTime();
  </script>
</body>
</html>
